<?php
/**
 * Buro Brein â€“ Parent Admin Menu
 *
 * Registers the top-level admin menu under which other plugin pages live.
 *
 * @package BreinPlugin
 */

// Exit if accessed directly.
if (!defined('ABSPATH')) {
  exit;
}

class Brein_BuroBrein_Menu
{
  /**
   * Hook suffix for parent page.
   *
   * @var string|null
   */
  private $page_hook_suffix = null;

  public function __construct()
  {
    // Ensure parent menu registers before submenus
    add_action('admin_menu', array($this, 'register_parent_menu'), 9);
  }

  /**
   * Register the top-level menu.
   */
  public function register_parent_menu()
  {
    $this->page_hook_suffix = add_menu_page(
      __('Buro Brein', 'brein-plugin'),
      __('Buro Brein', 'brein-plugin'),
      'manage_options',
      'brein',
      array($this, 'render_landing_page'),
      'data:image/svg+xml;base64,' . base64_encode('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.978 30.1028C10.1864 28.6703 10.0737 26.9475 10.7308 25.359C10.9061 24.9314 11.1564 24.5382 11.438 24.173L20.6316 12.251C20.7473 12.1012 20.763 11.8952 20.6722 11.7298L18.8104 8.36229C18.7478 8.25306 18.632 8.18127 18.5068 8.18127H15.3432C15.2681 8.18127 15.2024 8.21873 15.1649 8.28427C15.1273 8.34668 15.1273 8.42471 15.1649 8.49025L16.7921 11.4333C16.8828 11.5987 16.8672 11.8047 16.7514 11.9545L8.93782 22.0913C8.34327 22.8622 7.84574 23.708 7.52969 24.6287C6.7161 27.0162 6.95392 29.541 8.13049 31.6695L11.2565 37.3247C11.3285 37.4589 11.4693 37.54 11.6227 37.54H14.7456C14.8207 37.54 14.8864 37.5026 14.9239 37.437C14.9615 37.3715 14.9615 37.2966 14.9239 37.2311L10.9812 30.0997L10.978 30.1028Z" fill="#56E39F"/><path d="M29.4154 9.68253C30.2071 11.115 30.3198 12.8378 29.6626 14.4264C29.4874 14.8508 29.2402 15.2472 28.9586 15.6123L19.7682 27.5343C19.6524 27.6873 19.6367 27.8933 19.7275 28.0618L21.5862 31.4262C21.6488 31.5354 21.7646 31.6072 21.8898 31.6072H25.0534C25.1285 31.6072 25.1942 31.5697 25.2317 31.5042C25.2693 31.4418 25.2693 31.3637 25.2317 31.2982L23.6045 28.3583C23.5107 28.1897 23.5263 27.9838 23.6452 27.8308L31.4588 17.694C32.0533 16.9231 32.5509 16.0773 32.8638 15.1567C33.6774 12.7691 33.4364 10.2443 32.2598 8.11581L29.1432 2.45753C29.0712 2.32333 28.9304 2.24219 28.7771 2.24219H25.6542C25.5791 2.24219 25.5133 2.27964 25.4758 2.34518C25.4382 2.4076 25.4382 2.48562 25.4758 2.55116L29.4186 9.68253H29.4154Z" fill="#56E39F"/><path d="M38.6373 22.9996C39.2944 22.1445 39.3852 20.9835 38.8626 20.041L37.2292 17.0885C37.1572 16.9543 37.0164 16.8732 36.8631 16.8732H33.7401C33.665 16.8732 33.5993 16.9106 33.5618 16.9762C33.5242 17.0417 33.5242 17.1166 33.5618 17.1822L35.6865 21.0241C35.7804 21.1926 35.7647 21.3986 35.6458 21.5515L32.5323 25.5869C32.4415 25.7055 32.3007 25.7741 32.1505 25.7741H28.8805C28.7303 25.7741 28.5895 25.8428 28.4988 25.9614L26.7996 28.1648C26.6838 28.3177 26.6682 28.5237 26.7589 28.6922L28.2078 31.3107C28.3016 31.4792 28.286 31.6852 28.1671 31.8381L26.4179 34.1071C26.3271 34.2257 26.1863 34.2943 26.0361 34.2943H20.5162C20.341 34.2943 20.1783 34.1976 20.0938 34.0446L16.5954 27.7154C16.5015 27.5468 16.5171 27.3409 16.6361 27.1879L26.7652 14.0487C27.4223 13.1936 27.5131 12.0326 26.9905 11.0901L23.029 3.92438C22.4563 2.88822 21.3611 2.24219 20.1752 2.24219H14.1327C13.122 2.24219 12.1645 2.71033 11.548 3.51241L9.24493 6.49916C8.58781 7.3543 8.49706 8.51529 9.01963 9.45782L9.50465 10.3317C9.61105 10.5252 9.47023 10.7593 9.25119 10.7593H7.74919C6.90431 10.7593 6.1095 11.1494 5.59631 11.8173L1.75681 16.7889C1.09968 17.6441 1.00894 18.8051 1.53151 19.7476L3.16494 22.7C3.23691 22.8342 3.37772 22.9153 3.53105 22.9153H6.65397C6.72907 22.9153 6.79479 22.8779 6.83234 22.8124C6.86989 22.7468 6.86989 22.6719 6.83234 22.6064L4.70762 18.7645C4.61375 18.596 4.62939 18.39 4.7483 18.2402L7.86184 14.2017C7.95258 14.0831 8.0934 14.0144 8.2436 14.0144H11.5167C11.6669 14.0144 11.8077 13.9457 11.8985 13.8271L13.5976 11.6238C13.7134 11.4708 13.729 11.2648 13.6383 11.0994L12.1895 8.48096C12.0956 8.31243 12.1113 8.10645 12.2302 7.95664L13.9794 5.68771C14.0701 5.56912 14.2109 5.50046 14.3611 5.50046H19.881C20.0562 5.50046 20.219 5.59721 20.3034 5.75013L23.8019 12.0825C23.8957 12.2511 23.8801 12.4571 23.7612 12.6069L13.632 25.746C12.9749 26.6012 12.8842 27.7622 13.4067 28.7047L17.3683 35.8704C17.9409 36.9066 19.0361 37.5526 20.2221 37.5526H26.2645C27.2753 37.5526 28.2328 37.0845 28.8492 36.2824L31.1523 33.2956C31.8094 32.4405 31.9002 31.2795 31.3776 30.337L30.8926 29.4631C30.7862 29.2696 30.927 29.0355 31.146 29.0355H32.6481C33.4898 29.0355 34.2877 28.6454 34.8009 27.9775L38.631 23.009L38.6373 22.9996Z" fill="#56E39F"/></svg>'),
      58
    );
  }

  /**
   * Simple landing page with links to subpages.
   */
  public function render_landing_page()
  {
    ?>
    <div class="wrap">
      <h1><?php esc_html_e('Buro Brein', 'brein-plugin'); ?></h1>
      <p><?php esc_html_e('Welcome to Buro Brein settings. Use the menu to access specific tools.', 'brein-plugin'); ?></p>
      <ul>
        <li><a
            href="<?php echo esc_url(admin_url('admin.php?page=brein-qam')); ?>"><?php esc_html_e('Quick Action Menu', 'brein-plugin'); ?></a>
        </li>
        <li><a
            href="<?php echo esc_url(admin_url('admin.php?page=brein-plugin-scripts')); ?>"><?php esc_html_e('Scripts (Header & Footer)', 'brein-plugin'); ?></a>
        </li>
      </ul>
    </div>
    <?php
  }
}
